<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.mapper.ReservationMapper">

	<!-- 예약 목록 조회 -->
	<select id="getReservationsByUser" parameterType="string" resultType="com.example.demo.vo.ReservationVO">
		SELECT * FROM RESERVATION WHERE USER_ID = #{userId}
	</select>

	<!-- 예약 생성 -->
	<insert id="createReservation" parameterType="com.example.demo.vo.ReservationVO">
		INSERT INTO RESERVATION (RES_CODE, RES_DATE, TOTAL_PRICE, TICKET_PRICE, RES_STATUS, USER_ID)
		VALUES (#{resCode}, #{resDate}, #{totalPrice}, #{ticketPrice}, #{resStatus}, #{user.userId})
	</insert>

	<!-- 예약 취소 -->
	<update id="cancelReservation" parameterType="int">
		UPDATE RESERVATION SET RES_STATUS = FALSE WHERE RES_CODE = #{resCode}
	</update>

</mapper>
